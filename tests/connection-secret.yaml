---
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
  # namespace: default
stringData:
  username: "my-username"
  password: "my-password"
---
apiVersion: airflow.drfaust92/v1beta1
kind: Connection
metadata:
  name: example-connection-with-secret
  # namespace: default
spec:
  connType: "postgres"
  description: "Example Airflow Connection with credentials from Kubernetes Secret."
  host: "postgres.example.com"
  login:
    secretRef:
      name: db-credentials
      key: username
  password:
    secretRef:
      name: db-credentials
      key: password
  port: 5432
  schema: "airflow_db"
  extra: "{}"
